<div class="container-fluid">

  <div class="row" *ngIf="table.showHeader()">
    <div class="col-12">

      <h4 *ngIf="table.title" class="pull-left">{{table.title}}</h4>

      <div class="btn-group pull-right" role="group">

        <button type="button" *ngIf="table.options.refresh" class="btn btn-outline-dark">
          <i class="fa fa-refresh"></i> Refresh
        </button>

        <div class="btn-group" dropdown [autoClose]="false">

          <button id="ngx-project-btn" type="button" *ngIf="table.options.projection" class="btn btn-outline-dark" dropdownToggle aria-controls="ngx-project-dropdown">
            <i class="fa fa-bars"></i> Projection
          </button>

          <div *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu" id="ngx-project-dropdown" aria-labelledby="ngx-project-btn">

            <div class="row">
              <div class="col-12">

                <div role="menuitem">
                  <input type="text" class="form-control" placeholder="Search..." [(ngModel)]="searchText" />
                </div>
                <hr class="divider" />

                <ul class="list-unstyled dropdown-list" role="menuitem">

                  <li *ngFor="let column of table.columns | columnFilter: searchText" role="menuitemcheckbox">
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="checkbox" [disabled]="column.isDefault()" [checked]="table.isProjected(column.id)" (change)="table.project(column.id)">
                      <label class="form-check-label">
                        {{column.title}}
                      </label>
                    </div>
                  </li>

                </ul>

              </div>
            </div>

          </div>

        </div>

        <button type="button" *ngIf="table.filters" class="btn btn-outline-dark" (click)="filtersCollapsed = !filtersCollapsed" [attr.aria-expanded]="!filtersCollapsed" aria-controls="filtersCollapse">
          <i class="fa fa-filter"></i> Filter
        </button>

      </div>

    </div>
  </div>

  <div class="row">
    <div class="col-12">

      <div *ngIf="table.filters" class="card card-block card-header" [collapse]="filtersCollapsed" id="filtersCollapse">

        <div class="row">
          <div class="col-3" *ngFor="let filter of table.filters">
            <div class="form-group">
              <ngx-tableview-filter [filter]="filter"></ngx-tableview-filter>
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <div class="ngx-table-container">

        <table [ngClass]="['table', table.class]">
          <thead>
            <tr>
              <ng-template ngFor let-column [ngForOf]="table.projectedColumns()">
                <th>{{column.title}}</th>
              </ng-template>
            </tr>
            <tr>
              <ng-template ngFor let-column [ngForOf]="table.projectedColumns()">
                <th>
                  <div *ngIf="column.filter">
                    <ngx-tableview-filter [filter]="column.filter"></ngx-tableview-filter>
                  </div>
                </th>
              </ng-template>
            </tr>
          </thead>
          <tbody>
            <ng-template *ngIf="!loading" ngFor let-row [ngForOf]="data">
              <tr>
                <ng-template ngFor let-column [ngForOf]="table.projectedColumns()">
                  <td>{{row[column.id]}}</td>
                </ng-template>
              </tr>
            </ng-template>
            <tr *ngIf="loading">
              <td [colSpan]="table.projectedColumns().length">
                <h2 class="text-center m-5">Loading...</h2>
              </td>
            </tr>
          </tbody>
        </table>

      </div>
    </div>
  </div>

  <div *ngIf="table.options.pagination && table.pagination.total !== -1 && !loading" class="row">

    <div class="col-4 text-left">
      <label class="my-1">Record(s) {{table.pagination.start}} - {{table.pagination.end}} of {{table.pagination.total}}</label>
    </div>

    <div class="col-4">
      <div class="form-inline justify-content-center">

        <select class="form-control">
          <option *ngFor="let record of table.pagination.records" [value]="record">{{record}}</option>
        </select>
        <label class="my-1 ml-2"> record(s) per page</label>
      </div>
    </div>

    <div class="col-4 pull-right">
      <pagination [boundaryLinks]="true" [totalItems]="" [rotate]="true" [maxSize]="5" class="justify-content-end"></pagination>
    </div>
  </div>

</div>

